<div *ngIf="video as v; else loading" class="container py-3">
  <h2 class="mb-3">{{ v.videoTitle }}</h2>
  <div class="player">
    <iframe *ngIf="embedUrl" [src]="embedUrl" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    <video *ngIf="!embedUrl && blobUrl" [src]="blobUrl" controls (error)="onVideoError($event)" width="100%" height="auto"></video>
    <div *ngIf="!embedUrl && !blobUrl && !isLoading && !errorMsg" class="alert alert-warning">No video URL available</div>
    <div *ngIf="isLoading && !errorMsg" class="alert alert-info">جاري تحميل الفيديو...</div>
  </div>
  <div *ngIf="errorMsg" class="alert alert-danger mt-3" role="alert">
    <h5 class="alert-heading">خطأ في تحميل الفيديو</h5>
    <p>{{ errorMsg }}</p>
    <hr>
    <p class="mb-0">قد يكون السبب أحد ما يلي:</p>
    <ul class="mb-0">
      <li>الفيديو غير موجود على السيرفر</li>
      <li>الملف تالف أو محذوف</li>
      <li>لا توجد صلاحيات للوصول إلى الملف</li>
      <li>مشكلة في الاتصال بالسيرفر</li>
    </ul>
  </div>
  <div *ngIf="v.duration && v.duration > 0" class="mt-3 text-muted">مدة الفيديو: {{ v.duration }} ثانية</div>
</div>

<ng-template #loading>
  <div class="py-5 text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">جاري التحميل...</span>
    </div>
    <p class="mt-2">جاري تحميل معلومات الفيديو...</p>
  </div>
</ng-template>